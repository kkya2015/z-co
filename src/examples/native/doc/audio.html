<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Audio</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <link rel="stylesheet" href="res/doc.css">
  <style type="text/css"></style>
</head>
<body>
  <h1>audio</h1>
  <p>audio模块用于提供音频的录制和播放功能，可调用系统的麦克风设备进行录音操作，也可调用系统的扬声器设备播放音频文件。</p>
  <h3>索引</h3>
  <hr />
  <h3>
    <a href="#方法">方法</a>
    ：
  </h3>
  <ul>
    <li>
      <a href="#getRecorder">getRecorder</a>
      ：获取当前设备的录音对象
    </li>
    <li>
      <a href="#createPlayer">createPlayer</a>
      ：创建音频播放对象
    </li>
  </ul>
  <h3>
    <a href="#对象">对象</a>
    ：
  </h3>
  <ul>
    <li>
      <p>
        <a href="#AudioRecorder">AudioRecorder</a>
        ：录音对象
      </p>
      <ul>
        <li>
          方法
          <ul>
            <li>
              <a href="#record">record</a>
              ：调用设备麦克风进行录音操作
            </li>
            <li>
              <a href="#getCurrentTime">getCurrentTime</a>
              ：录音时,获取当前录音时长
            </li>
            <li>
              <a href="#getDuration">getDuration</a>
              ：获取录音时长上限,如果没有设置录音时长上限,则返回-1
            </li>
            <li>
              <a href="#addCalculateTimeCallback">addCalculateTimeCallback</a>
              ：添加计时回调
            </li>
            <li>
              <a href="#addCountDownCallback">addCountDownCallback</a>
              ：添加倒计时回调
            </li>
            <li>
              <a href="#addAveragePowerCallback">addAveragePowerCallback</a>
              ：添加音量监控回调,录音时,当音量分贝有变化时,返回当前音量分贝值
            </li>
            <li>
              <a href="#playJustRecord">playJustRecord</a>
              ：播放刚刚录制完成的录音文件
            </li>
            <li>
              <a href="#stopp">stop</a>
              ：结束录音操作
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li>
      <p>
        <a href="#AudioPlayer">AudioPlayer</a>
        ：音频播放对象
      </p>
      <ul>
        <li>
          方法
          <ul>
            <li>
              <a href="#play">play</a>
              ：开始播放音频
            </li>
            <li>
              <a href="#pause">pause</a>
              ：暂停播放音频
            </li>
            <li>
              <a href="#resume">resume</a>
              ：恢复播放音频
            </li>
            <li>
              <a href="#stop">stop</a>
              ：停止播放音频
            </li>
            <li>
              <a href="#seekTo">seekTo</a>
              ：跳到指定位置播放音频
            </li>
            <li>
              <a href="#getDurationp">getDuration</a>
              ：获取音频流的总长度
            </li>
            <li>
              <a href="#getPosition">getPosition</a>
              ：获取音频流当前播放的位置
            </li>
            <li>
              <a href="#setRoute">setRoute</a>
              ：设置音频输出线路
            </li>
            <li>
              <a href="#isPlaying">isPlaying</a>
              ：是否正在播放
            </li>
            <li>
              <a href="#addFinishCallback">addFinishCallback</a>
              ：添加播放音频文件完毕回调
            </li>
          </ul>
        </li>
      </ul>
    </li>
  </ul>
  <hr />
  <h1>
    <div id="方法">方法</div>
  </h1>
  <hr />
  <h2>
    <div id="getRecorder" style="color:red">getRecorder</div>
  </h2>
  <ul>
    <li>
      <h4>
        app.audio.getRecorder([options])   ⇒
        <a href="#AudioRecorder">AudioRecorder</a>
      </h4>
      <pre><code>获取当前设备的录音对象</code></pre>

      <ul>
        <li> <strong>options</strong>
          : JSON对象，调用麦克风设备进行录音的参数
          <ul>
            <li> <strong>type</strong>
              ：JSON
            </li>
            <li>
              <strong>默认值</strong>
              ：无
            </li>
            <li>
              <strong>keys</strong>
              <ul>
                <li>
                  <strong>filename</strong>
                  ：( <em>String</em>
                  )保存录音文件的路径或文件名。若未设置该值，则生成的录音文件由时间戳命名，后缀根据录音文件的格式确定。可设置具体文件名（存在文件后缀，值应同录音文件的格式相同），也可只设置路径，如果只设置路径（无文件后缀则认为是路径），文件名由录音程序自动生成。如果只设置文件名,则保存在默认目录下.iOS:默认目录是temp临时目录.Android:默认目录是协议路径的cache目录.若设置的路径或者文件名插件认为违法,则保存在默认目录下.
                  <ul>
                    <li>
                      <strong>默认值</strong>
                      ：无
                    </li>
                  </ul>
                </li>
                <li>
                  <strong>samplerate</strong>
                  ：( <em>String</em>
                  )录音文件的采样率
                  <ul>
                    <li>
                      <strong>默认值</strong>
                      ：'8000'
                      <ul>
                        <li>
                          <strong>取值范围</strong>
                          <ul>
                            <li>8000</li>
                            <li>44100</li>
                            <li>96000</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>
                  <strong>format</strong>
                  ：(
                  <em>String</em>
                  )录音文件的格式
                  <ul>
                    <li>
                      <strong>默认值</strong>
                      ：'aac'
                      <ul>
                        <li>
                          <strong>取值范围</strong>
                          （Android）
                          <ul>
                            <li>aac</li>
                            <li>amr</li>
                          </ul>
                        </li>
                        <li>
                          <strong>取值范围</strong>
                          （iOS）
                          <ul>
                            <li>aac</li>
                            <li>amr</li>
                            <li>wav</li>
                          </ul>
                        </li>
                      </ul>
                    </li>
                  </ul>
                </li>
                <li>
                  <strong>duration</strong>
                  ：(
                  <em>Number</em>
                  ) 录音时长上限 如果不设置 录音时长无上限(单位为s).
                  <ul>
                    <li>
                      <strong>默认值</strong>
                      ：无
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var recorder = app.audio.getRecorder({
        filename: 'record.aac'
    })
</code></pre>

    </li>
  </ul>
  <h2>
    <div id="createPlayer" style="color:red">createPlayer</div>
  </h2>
  <ul>
    <li>
      <h4>
        app.audio.createPlayer(path)   ⇒
        <a href="#AudioPlayer">AudioPlayer</a>
      </h4>
      <pre><code>    创建一个音频文件播放对象，用于打开音频文件并播放。 可通过path参数指定要播放的音频文件。创建后返回播放对象，通过Audio.play方法开始播放。
</code></pre>

      <ul>
        <li>
          <strong>path</strong>
          ： 音频文件路径, 要播放的音频文件的路径。
          <ul>
            <li>
              <strong>type</strong>
              ：String
            </li>
            <li>
              <strong>默认值</strong>
              ：无
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var player = app.audio.createPlayer(&quot;_Doc/Audio/test.mp3&quot;);
</code></pre>

    </li>
  </ul>
  <hr />
  <h1>
    <div id="对象">对象</div>
  </h1>
  <hr />
  <h2>
    <div id="AudioRecorder" style="color:red">AudioRecorder</div>
  </h2>
  <pre><code>    var recorder = app.audio.getRecorder({
        filename: 'record.aac'
    })
</code></pre>

  <ul>
    <li>
      <h4>
        <div id="record" style="color:red">record(success, [error])   ⇒ void</div>
      </h4>
      <pre><code>调用设备麦克风进行录音操作</code></pre>

      <ul>
        <li>
          <strong>success</strong>
          ：录音操作成功回调
          <ul>
            <li>
              <strong>type</strong>
              ：Function
            </li>
            <li>
              <strong>默认值</strong>
              ：无
            </li>
            <li>
              <strong>参数</strong>
              <ul>
                <li>
                  <strong>recordFile</strong>
                  ：录音操作保存的音频文件路径
                  <ul>
                    <li>
                      <strong>type</strong>
                      ：String
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
        <li>
          <strong>error</strong>
          ：音频操作失败回调
          <ul>
            <li>
              <strong>type</strong>
              ：Function
            </li>
            <li>
              <strong>默认值</strong>
              ：无
            </li>
            <li>
              <strong>参数</strong>
              <ul>
                <li>
                  <strong>err</strong>
                  ：音频操作的错误信息
                  <ul>
                    <li>
                      <strong>type</strong>
                      ：String
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var recorder = app.audio.getRecorder({
        filename: 'record.aac'
    })

    EX - 1：
    recorder.record(function(recordFile) {
        console.log(recordFile);
    });

    EX - 2：
    recorder.record(function(recordFile) {
        console.log(recordFile);
    }, function(err) {
        console.log(err);
    });
</code></pre>

    </li>
    <li>
      <h4>
        <div id="getCurrentTime" style="color:red">getCurrentTime()   ⇒ Number</div>
      </h4>
      <pre><code>录音时,获取当前录音时长.</code></pre>

    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var recorder = app.audio.getRecorder({
        filename: 'record.aac'
    })
    recorder.record(function(recordFile) {
        console.log(recordFile);
    });
    var currentTime = recorder.getCurrentTime();
    console.log(currentTime);
</code></pre>

    </li>
    <li>
      <h4>
        <div id="getDuration" style="color:red">getDuration()   ⇒ Number</div>
      </h4>
      <pre><code>获取录音时长上限,如果没有设置录音时长上限,则返回-1.</code></pre>

    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var recorder = app.audio.getRecorder({
        filename: 'record.aac'
    })
    var curation = recorder.getDuration();
    console.log(curation);
</code></pre>

    </li>
    <li>
      <h4>
        <div id="addCalculateTimeCallback" style="color:red">addCalculateTimeCallback(callback)   ⇒ void</div>
      </h4>
      <pre><code>如果此回调被添加,则每秒回调一次.通过回调函数返回格式为&quot;mm:ss&quot;的字符串.内容为当前录音时长.</code></pre>

      <ul>
        <li>
          <strong>callback</strong>
          ：计时回调函数
          <ul>
            <li>
              <strong>type</strong>
              ：Function
            </li>
            <li>
              <strong>默认值</strong>
              ：无
            </li>
            <li>
              <strong>参数</strong>
              <ul>
                <li>
                  <strong>time</strong>
                  ：计时内容 格式为 &quot;mm:ss&quot;.
                  <ul>
                    <li>
                      <strong>type</strong>
                      ：String
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var recorder = app.audio.getRecorder({
        filename: 'record.aac'
    })
    recorder.addCalculateTimeCallback(function(time) {
        console.log(time)
    })
</code></pre>

    </li>
    <li>
      <h4>
        <div id="addCountDownCallback" style="color:red">addCountDownCallback(callback)   ⇒ void</div>
      </h4>
      <pre><code>添加倒计时回调.若没有设置录音时长上限,此方法添加的回调函数不会被调用.</code></pre>

      <ul>
        <li>
          <strong>callback</strong>
          ：倒计时回调函数
          <ul>
            <li>
              <strong>type</strong>
              ：Function
            </li>
            <li>
              <strong>默认值</strong>
              ：无
            </li>
            <li>
              <strong>参数</strong>
              <ul>
                <li>
                  <strong>time</strong>
                  ：计时内容 格式为 &quot;mm:ss&quot;.
                  <ul>
                    <li>
                      <strong>type</strong>
                      ：String
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var recorder = app.audio.getRecorder({
        filename: 'record.aac'
    })
    recorder.addCountDownCallback(function(time) {
        console.log(time)
    })
</code></pre>

    </li>
    <li>
      <h4>
        <div id="addAveragePowerCallback" style="color:red">addAveragePowerCallback(callback)   ⇒ void</div>
      </h4>
      <pre><code>添加音量监控回调,录音时,当音量分贝有变化时,返回当前音量分贝值.</code></pre>

      <ul>
        <li>
          <strong>callback</strong>
          ：音量监控回调
          <ul>
            <li>
              <strong>type</strong>
              ：Function
            </li>
            <li>
              <strong>默认值</strong>
              ：无
            </li>
            <li>
              <strong>参数</strong>
              <ul>
                <li>
                  <strong>averagePower</strong>
                  ：音量分贝值.
                  <ul>
                    <li>
                      <strong>type</strong>
                      ：Number
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var recorder = app.audio.getRecorder({
        filename: 'record.aac'
    })
    recorder.addAveragePowerCallback(function(averagePower) {
        console.log(averagePower)
    })
</code></pre>

    </li>
    <li>
      <h4>
        <div id="playJustRecord" style="color:red">playJustRecord()   ⇒ void</div>
      </h4>
      <pre><code>录音完毕之后,播放刚刚录制的声音文件.</code></pre>

    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var recorder = app.audio.getRecorder({
        filename: 'record.aac'
    })
    recorder.record(function(recordFile) {
        console.log(recordFile);
    });
    recorder.stop();
    recorder.playJustRecord();
</code></pre>

    </li>
    <li>
      <h4>
        <div id="stopp" style="color:red">stop()   ⇒ void</div>
      </h4>
      <pre><code>结束录音操作，通知设备完成录音操作。</code></pre>

    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var recorder = app.audio.getRecorder({
        filename: 'record.aac'
    })
    recorder.record(function(recordFile) {
        console.log(recordFile);
    });
    recorder.stop();
</code></pre>

    </li>
  </ul>
  <h2>
    <div id="AudioPlayer" style="color:red">AudioPlayer</div>
  </h2>
  <pre><code>var audioPlayer = app.audio.createPlayer()</code></pre>

  <ul>
    <li>
      <h4>
        <div id="play" style="color:red">play(success, [error])   ⇒ void</div>
      </h4>
      <pre><code>开始播放音频</code></pre>

      <ul>
        <li>
          <strong>success</strong>
          ：播放音频操作成功回调函数,当音频文件播放完成时回调
          <ul>
            <li>
              <strong>type</strong>
              ：Function
            </li>
            <li>
              <strong>默认值</strong>
              ：无
            </li>
          </ul>
        </li>
        <li>
          <strong>error</strong>
          ：音频操作失败回调
          <ul>
            <li>
              <strong>type</strong>
              ：Function
            </li>
            <li>
              <strong>默认值</strong>
              ：无
            </li>
            <li>
              <strong>参数</strong>
              <ul>
                <li>
                  <strong>err</strong>
                  ：音频操作的错误信息
                  <ul>
                    <li>
                      <strong>type</strong>
                      ：String
                    </li>
                  </ul>
                </li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var player = app.audio.createPlayer();

    EX - 1：
    player.play(function() {
        console.log('播放成功！');
    })

    EX - 2：
    player.play(function() {
        console.log('播放成功！');
    }, function(err) {
        console.log(err);
    })
</code></pre>

    </li>
    <li>
      <h4>
        <div id="pause" style="color:red">pause()   ⇒ void</div>
      </h4>
      <pre><code>    需先调用createPlayer方法创建音频播放对象，并开始播放。音频播放对象在播放状态才能暂停，在其它状态调用此方法无任何作用。
</code></pre>

    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var player = app.audio.createPlayer();
    player.pause();
</code></pre>

    </li>
    <li>
      <h4>
        <div id="resume" style="color:red">resume()   ⇒ void</div>
      </h4>
      <pre><code>音频播放对象在暂停状态才能恢复播放，在其它状态调用此方法无任何作用。</code></pre>

    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var player = app.audio.createPlayer();
    player.resume();
</code></pre>

    </li>
    <li>
      <h4>
        <div id="stop" style="color:red">stop()   ⇒ void</div>
      </h4>
      <pre><code>    停止播放音频，音频播放对象在播放或暂停状态才能停止播放，在其它状态调用此方法无任何作用。 停止播放后如果需要继续播放，则需调用play方法重新开始播放。
</code></pre>

    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var player = app.audio.createPlayer();
    player.stop();
</code></pre>

    </li>
    <li>
      <h4>
        <div id="seekTo" style="color:red">seekTo(position)   ⇒ void</div>
      </h4>
      <pre><code>跳到指定位置播放音频，音频播放对象在播放或暂停状态才能跳到指定播放音频，在其它状态调用此方法无任何作用。</code></pre>

      <ul>
        <li>
          <strong>position</strong>
          ：音频播放要跳到的位置，单位为s
          <ul>
            <li>
              <strong>type</strong>
              ：Number
            </li>
            <li>
              <strong>默认值</strong>
              ：无
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var player = app.audio.createPlayer();
    player.seekTo(33)；//跳到33秒播放
</code></pre>

    </li>
    <li>
      <h4>
        <div id="getDurationp" style="color:red">getDuration()   ⇒ Number</div>
      </h4>
      <pre><code>获取音频流的总长度，单位为秒，若长度未知则返回-1。如果还未获取到音频流信息则返回NaN，此时需要延迟获取此信息。</code></pre>

    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var player = app.audio.createPlayer();
    var duration = player.getDuration();
</code></pre>

    </li>
    <li>
      <h4>
        <div id="getPosition" style="color:red">getPosition()   ⇒ Number</div>
      </h4>
      <pre><code>获取音频流当前播放的位置（已播放的长度），单位为s。</code></pre>

    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var player = app.audio.createPlayer();
    var position = player.getPosition()；
</code></pre>

    </li>
    <li>
      <h4>
        <div id="setRoute" style="color:red">setRoute([route])   ⇒ void</div>
      </h4>
      <pre><code>可在音频文件开始播放前或播放的过程中改变音频输出线路，默认使用扬声器输出线路。</code></pre>

      <ul>
        <li>
          <strong>route</strong>
          ：音频播放时输出线路
          <ul>
            <li>
              <strong>type</strong>
              ：Number
            </li>
            <li>
              <strong>默认值</strong>
              ：0
            </li>
            <li>
              <strong>取值范围</strong>
              - 0：设备的扬声器音频输出线路
  - 1：设备听筒音频输出线路
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var player = app.audio.createPlayer();
    player.setRoute(1)； //使用听筒播放
</code></pre>

    </li>
    <li>
      <h4>
        <div id="isPlaying" style="color:red">isPlaying()   ⇒ boolean</div>
      </h4>
      <pre><code>获取是否正在播放。</code></pre>

    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var player = app.audio.createPlayer();
    var playing = player.isPlaying()；
</code></pre>

    </li>
    <li>
      <h4>
        <div id="addFinishCallback" style="color:red">addFinishCallback()   ⇒ void</div>
      </h4>
      <pre><code>添加播放完毕回调</code></pre>

    </li>
    <li>
      <h5>示例：</h5>
      <pre><code>    var player = app.audio.createPlayer();
    player.addFinishCallback(function(){
        console.log('播放完毕');
    });
</code></pre>

    </li>
  </ul>

</body>
</html>
<!-- This document was created with MarkdownPad, the Markdown editor for Windows (http://markdownpad.com) -->